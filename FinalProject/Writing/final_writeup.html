<!DOCTYPE html>
<html lang="en">
    
    <head>  <!-- head -->
      <title>
        My Final Write-Up
      </title>
      <link rel="stylesheet" href="style.css">
      <meta charset="utf-8"/>
    </head>

    <body> <!-- body -->
      <header>
        <h1> My Final Write-Up </h1>
      </header>
      <br>
      <p>My final project is a game called Coin Collector. The player is able to control the basket by dragging it around. The goal is to collect the coins falling from the top as many as possible in 60 seconds. Beside coins, there are also bombs and rubbish which are made to make trouble during the game.</p>
      <p>I chose a beautiful image for the background and used grid layout with styled borders for the webpage design. The page has 4 parts in total. The navigation bar contains the rules of the game displayed using unordered list as well as leaderboard displayed using ordered list. The artical part is for the main SVG Canvas. The side bar on the right shows the score, best score and remaining time of the game. The footer contains function buttons (start/end the game, restart the game, control the backgound music) and 3 radio buttons for different difficulty levels.</p>
      <p>Firstly, there are 4 key things about the items. The first thing is to create 3 types of items (coin, rubbish and bomb) and the basket. I drew 3 SVG graphs, a yellow circle, a blue rectangle and a black bigger circle, as the three sample items. Then I used <a href="https://dmitrybaranovskiy.github.io/raphael/reference.html#Paper.image">paper.image</a> function for the basket and added event listeners on it and the background to make it draggable. The second thing is to keep generating an item with random x position at different rate for different type. I created 3 arrays and 3 similar functions. Within the function, I stored one <a href="https://dmitrybaranovskiy.github.io/raphael/reference.html#Element.clone">clone</a> of the sample item in the array and reassign a random x position to it. And then I used 3 time intervals to call the generating function with different milliseconds. The third thing is to make the items fall at different speed. Within the generating functions, I wrote functions called fall that changes the y position of the item and draws the new one, and then I set time intervals to call fall functions with different milliseconds. The fourth thing is to check the collisions between the basket and any item. I wrote a fucntion to check the collisions between the basket and items and call it within the fall functions. If there is a collision, the item will be removed and something will happen (score increase/decrease or dead). If there is no collision and the item is falling out of the canvas, it will also be removed. To check the collisions, the function will firstly compute the distance between the center of the item and the center of the upper line of the bouncing box of the basket. Then it check if the item is above the basket and the distance is less than the radius/half the height of the item. If yes, it will return true. </p>
      <p>Besides, I added a function to count down the time from 60 seconds (rounded) and set a time interval for it. Then let's move to game status. I created a variable called gameOn to note down the status of the game. Then I created 3 functions: startGame, endGame and dead. In startGame, I reinitialize nearly every variable and innerHTML words and then start all the time intervals. In endGame, I update the best score, clear all the time intervals and change some of the innerHTML like remaining time and score. Dead is similar to endGame but the words in pop up confirmation are different. There are 3 possible ways to end the game: clicking the End Game button (endGame), collecting a bomb (dead), playing until the time is up (endGame). I added the respective functions to the function buttons, put dead function within the checking collision part in generating bombs function, made endGame be called when the remaining time is 0 (in count function).</p>
      <p>To make the game more interesting, I added 3 other functions. The first new function is to change the difficulty level of the game. To achieve this, the radio buttons will be checked and reinitialze the values of the generating rate and falling speed variables in startGame function. There are 3 modes: easy, medium and difficult. The second new function is sound. There will be different audios for the collision of different items. There will also be background music which can be controlled by a button. The third new function is leaderboard where shows the top 3 players with their usernames (when first load the page, the player will be asked to enter a username) and best scores. To achieve this, I made the <a href="https://www.w3schools.com/js/js_api_web_storage.asp">browser to store</a> these variables if the best score is higher than one of those on the leaderboard. The comparsion is done in endGame/dead function and leaderboard will be updated by changing the innerHTML. I also added a few codes to initialize the variables for the leaderboard if the game is played the first time on a browser. In this way, if different players play my game on the same browser, they can compete with each other!</p>
    </body>
</html>